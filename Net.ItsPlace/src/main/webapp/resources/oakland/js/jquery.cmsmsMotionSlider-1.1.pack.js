/* * Motion Slider v1.1 - jQuery Image Slider *  * (c) Copyright Steven "cmsmasters" Masters * http://cmsmastrs.net/ * For sale on ThemeForest.net */(function(a){a.fn.cmsmsMotionSlider=function(b){var b=jQuery.extend({sliderWidth:980,sliderHeight:400,pauseOnHover:true,showControl:true,showNav:true,navThumbs:true,showArrows:true,showPause:true,showTimer:true,showLightbox:true,showCaptions:true,useCanvas:true,sliderTheme:"light"},b);return this.each(function(){function bL(a,c,d,e,f){var g=0;a.beginPath();if(c<e){g=e-Math.sqrt(Math.pow(e,2)-Math.pow(e-c,2));a.moveTo(c,g);a.lineTo(c,d-g);a.arc(e,e,e,Math.PI-Math.acos((e-c)/e),Math.PI+Math.acos((e-c)/e),false)}else if(c+e>f){g=e-Math.sqrt(Math.pow(e,2)-Math.pow(e-(f-c),2));a.moveTo(e,0);a.lineTo(c,0);a.arc(f-e,e,e,-Math.PI/2,-Math.acos((e-(f-c))/e),false);a.lineTo(c,d-g);a.arc(f-e,e,e,Math.acos((e-(f-c))/e),Math.PI/2,false);a.lineTo(e,d);a.arc(e,e,e,Math.PI/2,3*Math.PI/2,false)}else{a.moveTo(e,0);a.lineTo(c,0);a.lineTo(c,d);a.lineTo(e,d);a.arc(e,e,e,Math.PI/2,3*Math.PI/2,false)}a.closePath();a.fill();if(c<f-1){a.save();a.shadowOffsetX=1;a.shadowBlur=1;a.shadowColor=b.sliderTheme=="light"?"#c7c7c7":"#141414";if(c+e>f)g=g+1;a.fillRect(c,g,1,N-g*2);a.restore()}}function bK(a,c,d,e){a.save();a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=2;a.shadowColor=b.sliderTheme=="light"?"#c7c7c7":"#141414";a.fillStyle=b.sliderTheme=="light"?"#d9d9d9":"#202020";bI(a,c,d,e);a.fillStyle=b.sliderTheme=="light"?"#f5f5f5":"#333333";bJ(a,c,d,e);a.restore()}function bJ(a,b,c,d){a.beginPath();a.moveTo(1e3,1e3);a.lineTo(1e3,-1e3);a.lineTo(-1e3,-1e3);a.lineTo(-1e3,1e3);a.lineTo(1e3,1e3);a.moveTo(d,0);a.lineTo(b-d,0);a.arc(b-d,d,d,-Math.PI/2,Math.PI/2,false);a.lineTo(d,c);a.arc(d,d,d,Math.PI/2,3*Math.PI/2,false);a.closePath();a.fill()}function bI(a,b,c,d){a.beginPath();a.moveTo(d,0);a.lineTo(b-d,0);a.arc(b-d,d,d,-Math.PI/2,Math.PI/2,false);a.lineTo(d,c);a.arc(d,d,d,Math.PI/2,3*Math.PI/2,false);a.closePath();a.fill()}function bH(a,b){for(var c=0;c<a.length;c++){if(a[c]==b)a.splice(c,1)}}function bG(a){params=["in","none","out"];if(a)bH(params,a);return params[parseInt(Math.random()*params.length)]}function bF(a){params=["left","center","right"];if(a)bH(params,a);return params[parseInt(Math.random()*params.length)]}function bE(a){params=["top","center","bottom"];if(a)bH(params,a);return params[parseInt(Math.random()*params.length)]}function bD(){if(b.showArrows){bd.fadeIn(500);be.fadeIn(500);bl.parent().fadeOut(500)}else{bl.parent().fadeOut(500)}}function bC(){if(b.showArrows){bl.parent().fadeIn(500);bd.fadeOut(500);be.fadeOut(500)}else{bl.parent().fadeIn(500)}}function bB(){$invideo=false;$workSlider.find("li.active iframe").fadeOut(500,function(){bx(bf);$workSlider.find("li.active canvas").css({display:"block"})});iframe=false}function bA(){var a=R.width();var b=R.parent().width();var c=parseInt(R.css("margin-left").replace("-","").replace("px",""));if(c>0)c/b<1?R.animate({marginLeft:0},300):R.animate({marginLeft:"-"+parseInt(c-b)+"px"},300)}function bz(){var a=R.width();var b=R.parent().width();var c=parseInt(R.css("margin-left").replace("-","").replace("px",""));if(parseInt(a-c)>b){if(a/b<2){R.animate({marginLeft:parseInt(b-parseInt(a-c))+"px"},300)}else{parseInt(a-c)/b<2?R.animate({marginLeft:"-"+parseInt(a-b)+"px"},300):R.animate({marginLeft:"-"+parseInt(c+b)+"px"},300)}}}function by(){var a=R.width();var b=R.parent().width();var c=parseInt(R.css("margin-left").replace("-","").replace("px",""));var d=R.find("li.active").position().left>c?R.find("li.active").position().left+113:R.find("li.active").position().left;if(d<c){if((c-d)/b<1){c>b?R.animate({marginLeft:"-"+parseInt(d-b+113)+"px"},300):bA()}else{R.animate({marginLeft:0},300)}}else if(d-c>b){if((d-c)/b>1){a-parseInt(d-107)>b?R.animate({marginLeft:"-"+parseInt(d-107)+"px"},300):R.animate({marginLeft:"-"+parseInt(a-b)+"px"},300)}else{a-c<b?R.animate({marginLeft:"-"+parseInt(a-c)+"px"},300):bz()}}}function bx(a){if(a.hasClass("active")){a.removeClass("active");J=false}else{a.addClass("active");J=true}}function bw(){if(F||$infadein)return false;if(bf.hasClass("active")){bf.removeClass("active");J=false}countdown=0}function bv(){if(F||$infadein)return false;$prevIndex=$workSlider.find("li.active").index();$currentIndex=$prevIndex==0?parseInt(g-1):parseInt($prevIndex-1);if(bf.hasClass("active")){bf.removeClass("active");J=false}countdown=0;E=true}function bu(b){if(F||$infadein)return false;$prevIndex=$workSlider.find("li.active").index();$currentIndex=a(b).parent().index();if($prevIndex==$currentIndex)return false;if(bf.hasClass("active")){bf.removeClass("active");J=false}countdown=0;E=true}function bt(){if(J||countdown<0)return;bs(M-parseInt(countdown/L));if(countdown===0)bq();countdown--}function bs(a){if(bh){bh.clearRect(0,0,M,N);if(a<M){bK(bh,M,N,O);bL(bh,a,N,O,M)}}else{bk.css({backgroundPosition:"-"+Math.round(Math.round(10-10*(a/110))*11)+"px 0"})}}function br(a,c,d,e,f,g,h){function A(){if(Math.abs(w-u)<=$widthPlus&&Math.abs(x-v)<=$heightPlus&&Math.abs(m-k)<=s&&Math.abs(n-l)<=t){clearInterval(C)}else{i.save();i.drawImage(y,-l,-k,u,v);i.restore();if(d=="in"){u+=$widthPlus;v+=$heightPlus}else{u-=$widthPlus;v-=$heightPlus}if($verDirection=="up"){if(d=="in"){g=="top"?k-=s:k+=s}else{k-=s}}else if($verDirection=="down"){if(d=="out"){e=="top"&&(g=="bottom"||g=="center")?k+=s:k-=s}else{k+=s}}else if($verDirection=="center"){d=="out"?k-=$heightPlus/2:k+=$heightPlus/2}else{d=="out"?k-=s:k+=s}if($horDirection=="left"){d=="in"?l+=t:l-=t}else if($horDirection=="right"){d=="out"?l-=t:l+=t}else if($horDirection=="center"){d=="out"?l-=$widthPlus/2:l+=$widthPlus/2}else{d=="out"?l-=t:l+=t}}}var i=document.getElementById("slideCanvas"+j).getContext("2d");var y=new Image;y.src=a.attr("src");switch(d){case"in":if(a.width()/b.sliderWidth<a.height()/b.sliderHeight){u=b.sliderWidth;o=0;v=a.width()>b.sliderWidth&&a.height()>b.sliderHeight?a.height()/parseFloat(a.width()/b.sliderWidth):a.height()*parseFloat(b.sliderWidth/a.width());p=v-b.sliderHeight}else if(a.width()/b.sliderWidth>a.height()/b.sliderHeight){u=a.width()>b.sliderWidth&&a.height()>b.sliderHeight?a.width()/parseFloat(a.height()/b.sliderHeight):a.width()*parseFloat(b.sliderHeight/a.height());o=u-b.sliderWidth;v=b.sliderHeight;p=0}else{u=b.sliderWidth;o=0;v=b.sliderHeight;p=0}if(a.width()>b.sliderWidth&&a.height()>b.sliderHeight){w=a.width();q=w-b.sliderWidth;x=a.height();r=x-b.sliderHeight}else{if(a.width()/b.sliderWidth<a.height()/b.sliderHeight){w=b.sliderWidth;q=0;x=a.height()*parseFloat(b.sliderWidth/a.width());r=x-b.sliderHeight}else if(a.width()/b.sliderWidth>a.height()/b.sliderHeight){w=a.width()*parseFloat(b.sliderHeight/a.height());q=w-b.sliderWidth;x=b.sliderHeight;r=0}else{w=b.sliderWidth;q=0;x=b.sliderHeight;r=0}}break;case"none":if(a.width()>b.sliderWidth&&a.height()>b.sliderHeight){w=u=a.width();q=o=u-b.sliderWidth;x=v=a.height();r=p=v-b.sliderHeight}else{if(a.width()/b.sliderWidth<a.height()/b.sliderHeight){w=u=b.sliderWidth;q=o=0;x=v=a.height()*parseFloat(b.sliderWidth/a.width());r=p=v-b.sliderHeight}else if(a.width()/b.sliderWidth>a.height()/b.sliderHeight){w=u=a.width()*parseFloat(b.sliderHeight/a.height());q=o=u-b.sliderWidth;x=v=b.sliderHeight;r=p=0}else{w=u=b.sliderWidth;q=o=0;x=v=b.sliderHeight;r=p=0}}break;case"out":if(a.width()>b.sliderWidth&&a.height()>b.sliderHeight){u=a.width();o=u-b.sliderWidth;v=a.height();p=v-b.sliderHeight}else{if(a.width()/b.sliderWidth<a.height()/b.sliderHeight){u=b.sliderWidth;o=0;v=a.height()*parseFloat(b.sliderWidth/a.width());p=v-b.sliderHeight}else if(a.width()/b.sliderWidth>a.height()/b.sliderHeight){u=a.width()*parseFloat(b.sliderHeight/a.height());o=u-b.sliderWidth;v=b.sliderHeight;p=0}else{u=b.sliderWidth;o=0;v=b.sliderHeight;p=0}}if(a.width()/b.sliderWidth<a.height()/b.sliderHeight){w=b.sliderWidth;q=0;x=a.width()>b.sliderWidth&&a.height()>b.sliderHeight?a.height()/parseFloat(a.width()/b.sliderWidth):a.height()*parseFloat(b.sliderWidth/a.width());r=x-b.sliderHeight}else if(a.width()/b.sliderWidth>a.height()/b.sliderHeight){w=a.width()>b.sliderWidth&&a.height()>b.sliderHeight?a.width()/parseFloat(a.height()/b.sliderHeight):a.width()*parseFloat(b.sliderHeight/a.height());q=w-b.sliderWidth;x=b.sliderHeight;r=0}else{w=b.sliderWidth;q=0;x=b.sliderHeight;r=0}break}switch(e){case"top":k=0;break;case"center":k=p/2;break;case"bottom":k=p;break}switch(f){case"left":l=0;break;case"center":l=o/2;break;case"right":l=o;break}switch(g){case"top":m=0;break;case"center":m=r/2;break;case"bottom":m=r;break}switch(h){case"left":n=0;break;case"center":n=q/2;break;case"right":n=q;break}if(e=="bottom"&&(g=="center"||g=="top")||e=="center"&&g=="top"){$verDirection="up"}else if(e=="top"&&(g=="center"||g=="bottom")||e=="center"&&g=="bottom"){$verDirection="down"}else if(e=="center"&&g=="center"){$verDirection="center"}else{$verDirection="none"}if(f=="right"&&(h=="center"||h=="left")||f=="center"&&h=="left"){$horDirection="left"}else if(f=="left"&&(h=="center"||h=="right")||f=="center"&&h=="right"){$horDirection="right"}else if(f=="center"&&h=="center"){$horDirection="center"}else{$horDirection="none"}clearInterval(C);$widthPlus=Math.abs(u-w)==0?0:parseFloat(Math.abs(u-w)/(25*c).toFixed(2));$heightPlus=Math.abs(v-x)==0?0:parseFloat(Math.abs(v-x)/(25*c).toFixed(2));s=Math.abs(k-m)==0?0:parseFloat(Math.abs(k-m)/(25*c).toFixed(2));t=Math.abs(l-n)==0?0:parseFloat(Math.abs(l-n)/(25*c).toFixed(2));var z=setInterval(function(){if(y.complete){clearInterval(z);i.drawImage(y,-l,-k,u,v);C=setInterval(A,40)}},50)}function bq(){function C(c){if(F||$infadein)return false;bC();if(bf.is(":not(.active)"))bx(bf);$invideo=true;if(d&&b.useCanvas){G=a(c).find("canvas:eq(0)").parent().attr("href")}else{G=a(c).find("img:eq(0)").parent().attr("href")}H=G.match(/^(http:\/\/)(www\.)?([^\/]+)(\.com)/i);if(H[3]=="youtube"){I=G.match(/^(http:\/\/)?(www\.)?youtube\.com\/(watch\?v=)?(v\/)?([^&]+)/i);var e=m?1:0;var f=n?0:1;if(a(c).find("#player"+j).attr("class")!="videoIframe"){var g=a('<div id="player'+j+'" class="videoIframe" />');a(c).append(g);if(typeof YT!==undefined)YT=undefined;var h=document.createElement("script");h.src="http://www.youtube.com/player_api";document.getElementById("player"+j).parentNode.insertBefore(h,document.getElementById("player"+j))}else{var g=a(c).find("#player"+j);a(g).find("iframe:eq(0)").css({display:"block"})}window.onYouTubePlayerAPIReady=function(){function c(){a.stopVideo();bB();bD();setTimeout(bw,1e3)}var a=new YT.Player("player"+j,{width:b.sliderWidth,height:b.sliderHeight,videoId:I[5],playerVars:{rel:0,showinfo:0,autoplay:1,autohide:1,fs:1,wmode:"opaque",hd:e,controls:f},events:{onStateChange:i}});bl.click(function(){if($invideo)c();return false})};function i(a){if(!l&&k&&a.data==YT.PlayerState.ENDED){a.target.stopVideo();bB();bD();setTimeout(bw,1e3)}else if(l&&a.data==YT.PlayerState.ENDED){a.target.seekTo(0)}}}else if(H[3]=="vimeo"){I=G.match(/^(http:\/\/)?(www\.)?vimeo\.com\/([^\/]+)/i);var o=l?1:0;var e=m?"high":"normal";if(a(c).find("#player"+j).attr("class")!="videoIframe"){var g=a('<iframe id="player'+j+'" class="videoIframe" src="http://player.vimeo.com/video/'+I[3]+"?title=0&byline=0&portrait=0&autoplay=1&autohide=1&wmode=opaque&api=1&player_id=player"+j+"&loop="+o+"&quality="+e+'" width="'+b.sliderWidth+'" height="'+b.sliderHeight+'" frameborder="0" webkitallowfullscreen />');a(c).append(g)}else{var g=a(c).find("#player"+j)}setTimeout(function(){function c(a){function e(){var a=document.getElementById("cmsmsMotionCloseButton");b(a,"click",function(a){if(a.target!=this||!$invideo)return false;c.api("seekTo",0);c.api("pause");bB();bD();setTimeout(bw,1e3)},false)}function d(){c.addEvent("finish",function(a){c.api("seekTo",0);c.api("pause");bB();bD();setTimeout(bw,1e3)})}var c=$f(a);if(!l&&k)d();e()}function b(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false)}else{a.attachEvent("on"+b,c)}}var a=document.getElementById("player"+j);$f(a).addEvent("ready",c)},500)}if(d&&b.useCanvas){$workSlider.find("li.slide"+j+" canvas:eq(0)").css({display:"none"})}else{$workSlider.find("li.slide"+j+" img:eq(0)").css({display:"none"})}g.fadeIn(500);g=h=false}F=$infadein=true;bs(0);if(E){i=$prevIndex?$prevIndex:$workSlider.find("li.active").index();j=$currentIndex;E=false}else{if($workSlider.find("li.active").is("li")){i=$workSlider.find("li.active").index();j=i==parseInt(g-1)?0:i+1}else{j=0}}var c=f.eq(j).find("img:eq(0)").parent().is("a");var e=f.eq(j).find("img:eq(0)").parent().is("a.video");var h=e?f.eq(j).find("img:eq(0)").parent().is("a.autoplay"):false;var k=e?f.eq(j).find("img:eq(0)").parent().is("a.autostop"):false;var l=e?f.eq(j).find("img:eq(0)").parent().is("a.loop"):false;var m=e?f.eq(j).find("img:eq(0)").parent().is("a.hd"):false;var n=e?f.eq(j).find("img:eq(0)").parent().is("a.hideControls"):false;var o=f.eq(j).find(".cmsmsSlideCaption").length>0?true:false;var p=f.eq(i).find(".cmsmsSlideCaption").length>0?true:false;if(o){var q=f.eq(j).find(".cmsmsSlideCaption").attr("data-width");var r=f.eq(j).find(".cmsmsSlideCaption").attr("data-top");var s=f.eq(j).find(".cmsmsSlideCaption").attr("data-left");q=q?q:bn;r=r?r:bo;s=s?s:bp}var t=f.eq(j).attr("data-pause");countdown=t?parseFloat(t)*18:countdown=90;L=parseFloat(countdown/M);var u=f.eq(j).attr("data-animation");u=u?u:15;var v=f.eq(j).attr("data-start");var w=v?v.split(/ /)[0]:bE();var x=v?v.split(/ /)[1]:bF();w=w!="top"&&w!="center"&&w!="bottom"?bE():w;x=x!="left"&&x!="center"&&x!="right"?bF():x;var y=f.eq(j).attr("data-finish");var z=y?y.split(/ /)[0]:bE();var A=y?y.split(/ /)[1]:bF();z=z!="top"&&z!="center"&&z!="bottom"?bE():z;A=A!="left"&&A!="center"&&A!="right"?bF():A;var B=f.eq(j).attr("data-zoom");if(w==z&&x==A){B=B?B:bG("none")}else{B=B?B:bG()}B=B!="in"&&B!="none"&&B!="out"?bG():B;if(d&&b.useCanvas)br(f.eq(j).find("img:eq(0)"),parseFloat(u),B,w,x,z,A);R.find("li.active").each(function(){a(this).removeClass("active")});R.find("li:eq("+j+")").addClass("active");by();$workSlider.find("li.slide"+j).addClass("active").animate({opacity:1},500,function(){if(b.showCaptions&&o){$workSlider.find("li.slide"+j+" .cmsmsSlideCaption").css({width:q+"px"});$workSlider.find("li.slide"+j+" .cmsmsSlideCaptionContainer").css({width:0,display:"block"});var a=$workSlider.find("li.slide"+j+" .cmsmsSlideCaption").height();$workSlider.find("li.slide"+j+" .cmsmsSlideCaptionContainer").css({top:r+"px",left:s+"px",marginTop:a/2,marginLeft:q/2}).animate({width:q+"px",height:a+"px",marginTop:0,marginLeft:0,opacity:1},1e3,function(){$workSlider.find("li.slide"+j+" .cmsmsSlideCaption").animate({opacity:1,marginTop:0},500,function(){$infadein=false;if(h)C($workSlider.find("li.slide"+j))})})}else{$infadein=false;if(h)C($workSlider.find("li.slide"+j))}});if(i!="undefined"){$workSlider.find("li.slide"+i).animate({opacity:0},1e3,function(){a(this).removeClass("active");if(b.showCaptions&&p){$workSlider.find("li.slide"+i+" .cmsmsSlideCaptionContainer").css({display:"none",width:0,height:0,opacity:0});$workSlider.find("li.slide"+i+" .cmsmsSlideCaption").css({opacity:0,marginTop:"20px"})}$workSlider.find("li").not(".slide"+j).css({opacity:0})})}F=false;if(e){$workSlider.find("li.slide"+j).click(function(){C($workSlider.find("li.slide"+j));return false})}}var c=a(this);c.addClass("cmsmsMotionOldSlides");var d="getContext"in document.createElement("canvas");var e=c.wrap('<div class="cmsmsMotionSliderContainer" />').parent();if(b.navThumbs){e.css({width:b.sliderWidth+"px",height:b.sliderHeight+80+"px"})}else{e.css({width:b.sliderWidth+"px",height:b.sliderHeight+55+"px"})}var f=c.find("li");var g=$count=f.length;var h=$hasTarget=$hasVideo=$hasCaption=false;var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;var D=$currentIndex=$prevIndex=0;var E=false;var F=$infadein=$invideo=false;var G,H,I;var J=false;var K;var L=countdown=0;var M=100;var N=8;var O=N/2;var P='<div class="cmsmsMotionControl">'+'<div class="cmsmsMotionNavigation"><div class="navLeft"><a href="#">up</a></div><ul><li><a href="#" class="active">1</a></li></ul><div class="navRight"><a href="#">down</a></div></div>'+'<div class="cmsmsMotionCntrlsCont">'+'<div class="cmsmsMotionTime"></div>'+'<div class="cmsmsMotionPlayPause"><a href="#">pause</a></div>'+'<div class="cmsmsMotionArrows"><a class="cmsmsMotionPrev" href="#">prev</a><a class="cmsmsMotionNext" href="#">next</a></div>'+"</div>"+'<div class="cmsmsMotionClose"><a onClick="return false;" href="#" id="cmsmsMotionCloseButton">close</a></div>'+"</div>";var Q=P?a(P):false;c.after(Q);var R=Q.find(".cmsmsMotionNavigation ul");if(b.navThumbs)Q.addClass("cmsmsMotionControlThumbs");R.parent().width(b.sliderWidth-300);if(!b.showArrows)R.parent().width(R.parent().width()+85);if(!b.showPause)R.parent().width(R.parent().width()+55);if(!b.showTimer)R.parent().width(R.parent().width()+100);if(!b.showArrows&&!b.showPause&&!b.showTimer)R.parent().width(R.parent().width()+20);R.empty();for(var S=0;S<$count;S++){var T=f.eq(S).find("img").attr("src");var U=f.eq(S).attr("data-thumb")?f.eq(S).attr("data-thumb"):T;var V=S==0?' class="active"':"";var W=b.navThumbs?'<img src="'+U+'" width="96" height="50" alt="" />':parseInt(S+1);var X=f.eq(S).find("img").parent().is("a")?f.eq(S).find("img").parent().attr("href"):T;var Y=b.navThumbs&&b.showLightbox?'<a href="'+X+'" class="navItemShow" rel="prettyPhoto[motionSlider]"> </a>':"";R.append("<li"+V+'><a href="#" class="navItem">'+W+"</a>"+Y+"</li>")}R.width(R.find("li").length*113-6);if(!b.showNav)R.parent().hide();var Z=Q.find(".showHide a");var _=R.find("li a.navItem");var ba=Q.find(".navLeft");var bb=Q.find(".navRight");var bc=Q.find(".cmsmsMotionArrows");var bd=bc.find(".cmsmsMotionPrev");var be=bc.find(".cmsmsMotionNext");var bf=Q.find(".cmsmsMotionPlayPause a");var bg=Q.find(".cmsmsMotionTime");if(!b.navThumbs||R.width()<R.parent().width())ba.hide();if(!b.navThumbs||R.width()<R.parent().width())bb.hide();if(!b.showArrows)bc.hide();if(!b.showPause)bf.parent().hide();bg.hide();if(d){var bh=a('<canvas width="'+M+'" height="'+N+'"></canvas>');bg.append(bh);bh=bh[0].getContext("2d");if(!bh)return;var bi=bh.createLinearGradient(0,N,0,0);if(b.sliderTheme=="light"){bi.addColorStop(0,"#535353");bi.addColorStop(.1,"#616161");bi.addColorStop(.9,"#8d8d8d");bi.addColorStop(1,"#858585")}else{bi.addColorStop(0,"#868686");bi.addColorStop(.1,"#acacac");bi.addColorStop(.2,"#c7c7c7");bi.addColorStop(.9,"#d3d3d3");bi.addColorStop(1,"#c7c7c7")}bh.fillStyle=bi}else{var bj=a('<div class="cmsmsMotionTimeBg"><div class="cmsmsMotionTimeImage"></div></div>');bg.append(bj);var bk=bj.find(".cmsmsMotionTimeImage")}if(b.showTimer)bg.show();if(!b.showControl)Q.hide();var bl=Q.find(".cmsmsMotionClose a");var bm='<ul class="cmsmsMotionSlides" />';c.after(bm);$workSlider=e.find(".cmsmsMotionSlides");$workSlider.css({width:b.sliderWidth+"px",height:b.sliderHeight+"px"});f.each(function(){var c=a(this);var e=c.find("img:eq(0)");h=e.parent().is("a")?true:false;$hasVideo=h&&e.parent().is("a.video")?true:false;$hasTarget=e.parent().parent().find("a:eq(0)").attr("target");$hasCaption=c.find(".cmsmsSlideCaption").length>0?true:false;$workSlider.append('<li class="slide'+D+'" />');if(d&&b.useCanvas){var f=document.createElement("canvas"),g=f.getContext("2d");f.width=b.sliderWidth;f.height=b.sliderHeight;$workSlider.find("li.slide"+D).append(f);h?$workSlider.find("li.slide"+D+" canvas").attr({id:"slideCanvas"+D}).wrap('<a href="'+e.parent().attr("href")+'" />'):$workSlider.find("li.slide"+D+" canvas").attr({id:"slideCanvas"+D});if(h&&!$hasVideo&&$hasTarget)$workSlider.find("li.slide"+D).find("a:eq(0)").attr({target:"_blank"});if($hasVideo)$workSlider.find("li.slide"+D+" a").append('<div class="cmsmsMotionVideoImage" />')}else{$workSlider.find("li.slide"+D).append(e.clone());var i=e.width();var j=e.height();var k=0;var l=0;if(i/b.sliderWidth<j/b.sliderHeight){j=b.sliderHeight*parseFloat(j/b.sliderHeight/(i/b.sliderWidth));i=b.sliderWidth;k=parseFloat((j-b.sliderHeight)/2)}else{i=b.sliderWidth*parseFloat(i/b.sliderWidth/(j/b.sliderHeight));j=b.sliderHeight;l=parseFloat((i-b.sliderWidth)/2)}$workSlider.find("li.slide"+D+" img:eq(0)").attr({id:"slideCanvas"+D}).css({width:i,height:j,margin:-k+" 0 0 -"+l});if(h)$workSlider.find("li.slide"+D+" img:eq(0)").wrap('<a href="'+e.parent().attr("href")+'" />');if(h&&!$hasVideo&&$hasTarget)$workSlider.find("li.slide"+D).find("a:eq(0)").attr({target:"_blank"});if($hasVideo)$workSlider.find("li.slide"+D+" a").append('<div class="cmsmsMotionVideoImage" />')}if($hasCaption){$workSlider.find("li.slide"+D).append(c.find(".cmsmsSlideCaption").clone());$workSlider.find("li.slide"+D+" .cmsmsSlideCaption").wrap('<div class="cmsmsSlideCaptionContainer" />')}D++});if(c.find(".cmsmsSlideCaption").length>0){var bn=a(".cmsmsSlideCaptionContainer").css("width").replace("px","");var bo=a(".cmsmsSlideCaptionContainer").css("top").replace("px","");var bp=a(".cmsmsSlideCaptionContainer").css("left").replace("px","")}bq();K=setInterval(bt,50);if(b.pauseOnHover){$workSlider.hover(function(){if(!$invideo)bx(bf)},function(){if(!$invideo)bx(bf)})}Z.click(function(){navShowHide();return false});_.click(function(){if(!$invideo)bu(this);return false});bd.click(function(){if(!$invideo)bv();return false});be.click(function(){if(!$invideo)bw();return false});bf.click(function(){if(!$invideo)bx(bf);return false});bb.click(function(){bz();return false});ba.click(function(){bA();return false})})}})(jQuery)