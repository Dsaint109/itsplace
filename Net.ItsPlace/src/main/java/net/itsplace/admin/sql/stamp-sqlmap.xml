<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="stamp">
	<typeAlias type="net.itsplace.domain.StampType" alias="StampType"/>	    
	
	<select id="getStampType" resultClass="StampType" parameterClass="int" >
	    SELECT  sql_calc_found_rows SID, TITLE, STAMPCOUNT, EVENTDAY, REMARK, DISPSEQ, EDITDATE, ISDELETE
		FROM PSTAMPTYPE
		WHERE SID = #sid#
	</select>
    <select id="getStampTypeList" resultClass="StampType" parameterClass="java.util.Map">
    	 SELECT  sql_calc_found_rows SID, TITLE, STAMPCOUNT, EVENTDAY, REMARK, DISPSEQ, EDITDATE, ISDELETE
		 FROM PSTAMPTYPE
         <dynamic>
	    	 <isNotEmpty property="search">
	    	 	WHERE A.FNAME like CONCAT('%',#search#,'%')
	    	 	or B.HDONGNAME like CONCAT('%',#search#,'%')
	    	 	or MOBILE like CONCAT('%',#search#,'%')
	    	 </isNotEmpty>
    	 </dynamic>
    	 ORDER BY $sortColumn$ $sortDirection$
    	 LIMIT #startRow# , #endRow#	
    </select>
    
    <insert id="saveStampType" parameterClass="StampType">
        INSERT INTO PSTAMPTYPE(TITLE, STAMPCOUNT, EVENTDAY, REMARK, DISPSEQ, SAVEDATE)
        VALUES(#title#, #stampcount#, #eventday#, #remark#, #dispseq#, now() )
    </insert>
    
    <update id="editStampType" parameterClass="StampType">
        UPDATE PTAMPTYPE
        SET TITLE =#title#,
            STAMPCOUNT =#stampcount#,
            EVENTDAY = #eventday#,
            REMARK = #remark#,
            DISPSEQ =#dispseq#,
            ISDELETE = #isDelete#
        WHERE SID =#sid#    
    </update>
    
    <update id="deleteStampType" parameterClass="int">
        UPDATE PTAMPTYPE
        SET ISDELETE = 1
        WHERE SID =#sid#    
    </update>
    <update id="restoreStampType" parameterClass="int">
        UPDATE PTAMPTYPE
        SET ISDELETE = 0
        WHERE SID =#sid#    
    </update>
</sqlMap>